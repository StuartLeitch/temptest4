scalar Date

enum InvoiceStatus {
  DRAFT
  PENDING
  ACTIVE
  FINAL
}

type Article {
  id: String
  journalId: String
  journalTitle: String
  customId: String
  created: Date
  title: String
  articleType: String
  authorEmail: String
  authorCountry: String
  authorSurname: String
  authorFirstName: String
}

type Transaction {
  id: String
  status: String
}

enum TransactionStatus {
  DRAFT
  ACTIVE
  FINAL
}

type InvoiceItem {
  id: String
  invoiceId: String
  manuscriptId: String
  type: String
  price: Float
  rate: Float
  vat: Float
  vatnote: String
  article: Article
  dateCreated: Date
  coupons: [Coupon]
  waivers: [Waiver]
}

type Invoice {
  invoiceId: String
  dateCreated: String
  dateChanged: String
  dateIssued: String
  dateAccepted: String
  vat: Float
  charge: Float
  status: InvoiceStatus
  payer: Payer
  referenceNumber: String
  invoiceItem: InvoiceItem
  title: String
  price: Float
  customId: String
  type: String
  payment: Payment
}

type InvoiceVat {
  vatPercentage: Float
  vatNote: String
  rate: Float
}

type InvoiceId {
  invoiceId: [String]
}

input AddressInput {
  city: String
  country: String
  state: String
  postalCode: String
  addressLine1: String
}

input PayerInput {
  id: String
  invoiceId: String
  type: PayerType
  name: String
  email: String
  organization: String
  vatId: String
  address: AddressInput
}

type Journal {
  journalId: String
  journalTitle: String
  # ... (TODO: add missing fields here)
}

enum PayerType {
  INSTITUTION
  INDIVIDUAL
}

type Payer {
  id: String
  type: PayerType
  name: String
  email: String
  organization: String
  address: Address
  vatId: String
}

type Address {
  city: String
  country: String
  state: String
  postalCode: String
  addressLine1: String
}

input CreditCardInput {
  amount: Float!
  cardNumber: String!
  expiration: String!
  cvv: String!
  postalCode: String
}

type Payment {
  id: String!
  invoiceId: String
  payerId: String
  paymentMethodId: String
  foreignPaymentId: String
  paymentProof: String
  amount: Float
  datePaid: Date
  paymentMethod: PaymentMethod
}

type PaymentMethod {
  id: String!
  name: String!
  isActive: Boolean
}

type Coupon {
  reduction: Float
  code: String
}

type Waiver {
  reduction: Float
  type_id: String
}

type ClientToken {
  token: String!
}

type PaginatedInvoices {
  totalCount: Int
  invoices: [Invoice]
}

input Pagination {
  offset: Int
  limit: Int
}

input StatusFilter {
  in: [InvoiceStatus]
}
input TransactionStatusFilter {
  in: [TransactionStatus]
}
input ReferenceNumberFilter {
  eq: String
}
input JournalIdFilter {
  in: [String]
}
input CustomIdFilter {
  eq: String
}
input ArticleFilter {
  journalId: JournalIdFilter
  customId: CustomIdFilter
}
input TransactionFilter {
  status: TransactionStatusFilter
}
input InvoiceItemFiltering {
  article: ArticleFilter
}

input InvoicesFiltering {
  status: StatusFilter
  referenceNumber: ReferenceNumberFilter
  transaction: TransactionFilter
  invoiceItem: InvoiceItemFiltering
}

input Filtering {
  invoices: InvoicesFiltering
}

type Query {
  getPaymentMethods: [PaymentMethod]
  getClientToken: ClientToken
  invoice(invoiceId: String): Invoice
  invoiceVat(
    invoiceId: String
    country: String
    state: String
    postalCode: String
    payerType: String
  ): InvoiceVat
  invoices(filtering: Filtering, pagination: Pagination): PaginatedInvoices
  invoiceIdByManuscriptCustomId(customId: String): InvoiceId
  journals: [Journal]
  echo(value: String): String
}

type Mutation {
  confirmInvoice(payer: PayerInput!): Payer!
  applyCoupon(invoiceId: String, couponCode: String): Coupon
  createInvoice(totalAmount: Float): Invoice
  deleteInvoice(id: String!): Boolean
  setTransactionToActive(customId: String): Transaction
  creditCardPayment(
    invoiceId: String!
    payerId: String!
    paymentMethodId: String!
    paymentMethodNonce: String!
    amount: Float!
  ): Payment!
  recordPayPalPayment(
    paymentMethodId: String!
    invoiceId: String!
    payerId: String!
    orderId: String!
  ): Payment!
  migratePayment(
    invoiceId: String!
    payerId: String!
    amount: Float
    datePaid: String
  ): Payment!
  migrateInvoice(
    invoiceId: String!
    vatValue: Float
    invoiceReference: Float
    discount: Float
    APC: Float
    dateIssued: String
    dateAccepted: String
  ): Invoice
}
